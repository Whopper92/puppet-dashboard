From 44d8da0cb433c033d337e0e2c4a9715bcc86c498 Mon Sep 17 00:00:00 2001
From: Joshua Harlan Lifton <lifton@puppetlabs.com>
Date: Wed, 14 Mar 2012 14:51:52 -0700
Subject: [PATCH] Refactor how account widgets are added to the header

This commit refactors the changes made in commit cd417f1.
---
 app/views/shared/_global_nav.html.haml |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

diff --git a/app/views/shared/_global_nav.html.haml b/app/views/shared/_global_nav.html.haml
index b9dbd98..9dfdd10 100644
--- a/app/views/shared/_global_nav.html.haml
+++ b/app/views/shared/_global_nav.html.haml
@@ -1,16 +1,13 @@
 .topbar
   .topbar-inner
     .container
-      %ul#logo-and-account.navigation
+      %ul#global-navigation.navigation
         %li#logo
           - css = ["background-repeat: no-repeat", "text-indent: -9000px"]
           - css << "background-image: url('#{SETTINGS.custom_logo_url}')"
           - css << "height: #{SETTINGS.custom_logo_height}"
           - css << "width: #{SETTINGS.custom_logo_width}"
           %a{:href => root_path, :title => SETTINGS.custom_logo_alt_text, :style => css.join('; ')} Puppet Dashboard
-        - Registry.each_callback :core, :account_widgets do |callback|
-          = callback.call self
-      %ul#global-navigation.navigation
         %li#dashboard-version{:class => active_if(request.url == release_notes_url)}
           = link_to h(APP_VERSION), APP_VERSION_LINK
         %li#navigation-home{:class => active_if(request.url == root_url)}
@@ -31,3 +28,5 @@
             = link_to "Inventory Search", search_nodes_path
         - Registry.each_callback :core, :global_nav_widgets do |callback|
           = callback.call self
+        - Registry.each_callback :core, :account_widgets do |callback|
+          = callback.call self
-- 
1.7.5.4

